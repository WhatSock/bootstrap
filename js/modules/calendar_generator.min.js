/*
ARIA Calendar Module R2.0
Copyright 2010-2018 Bryan Garaventa (WhatSock.com)
Refactoring Contributions Copyright 2018 Danny Allen (dannya.com) / Wonderscore Ltd (wonderscore.co.uk)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
(function(){$A.setCalendar=function(i,c,k,l,n,d){var d=d||{},m=d.helpText?d.helpText:"Press the arrow keys to navigate by day, PageUp and PageDown to navigate by month, Alt+PageUp and Alt+PageDown to navigate by year, or Escape to cancel.",h=(n&&typeof n==="function")?n:function(p,o){k.value=o.formatDate(o,{YYYY:o.range.current.year,MMMM:o.range[o.range.current.month].name,dddd:o.range.wDays[o.range.current.wDay].lng,MM:("00"+(o.range.current.month+1)).slice(-2),DD:("00"+o.range.current.mDay).slice(-2),Do:o.getDateOrdinalSuffix(o.range.current.mDay),M:(o.range.current.month+1),D:o.range.current.mDay});o.close()},f={},e=function(o){f.alt=o.altKey;f.ctrl=o.ctrlKey;f.shift=o.shiftKey};$A([{id:i,role:d.role||"Calendar",trigger:c,bind:"opendatepicker",allowReopen:true,showHiddenClose:false,controlType:"DatePicker",tooltipTxt:d.tooltipTxt||"Press Escape to cancel",markedTxt:d.markedTxt||"Selected",disabledTxt:d.disabledTxt||"Disabled",commentedTxt:d.commentedTxt||"Has Comment",prevTxt:d.prevTxt||"Previous",nextTxt:d.nextTxt||"Next",monthTxt:d.monthTxt||"Month",yearTxt:d.yearTxt||"Year",leftButtonYearText:d.leftButtonYearText||"&#8656;",rightButtonYearText:d.rightButtonYearText||"&#8658;",leftButtonMonthText:d.leftButtonMonthText||"&#8592;",rightButtonMonthText:d.rightButtonMonthText||"&#8594;",drawFullCalendar:(d.drawFullCalendar===true),highlightToday:(d.highlightToday===true),pageUpDownNatural:(d.pageUpDownNatural===true),autoPosition:isNaN(d.autoPosition)?9:d.autoPosition,offsetTop:isNaN(d.offsetTop)?0:d.offsetTop,offsetLeft:isNaN(d.offsetLeft)?0:d.offsetLeft,posAnchor:d.posAnchor,targetObj:d.targetObj,inputDateFormat:d.inputDateFormat||"dddd MMMM D, YYYY",audibleDateFormat:d.audibleDateFormat||"D, MMMM YYYY (dddd)",initialDate:((d.initialDate instanceof Date)?d.initialDate:new Date()),minDate:((d.minDate!==undefined)?(d.minDate instanceof Date?d.minDate:new Date((new Date()).setDate((new Date()).getDate()+d.minDate))):undefined),maxDate:((d.maxDate!==undefined)?(d.maxDate instanceof Date?d.maxDate:new Date((new Date()).setDate((new Date()).getDate()+d.maxDate))):undefined),disableWeekdays:(d.disableWeekdays!==undefined)?d.disableWeekdays:false,disableWeekends:(d.disableWeekends!==undefined)?d.disableWeekends:false,cssObj:d.cssObj||{position:"absolute",zIndex:1},className:d.className||"calendar",range:{disabledWDays:[],0:{name:d.months&&d.months[0]?d.months[0]:"January",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},1:{name:d.months&&d.months[1]?d.months[1]:"February",max:28,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},2:{name:d.months&&d.months[2]?d.months[2]:"March",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},3:{name:d.months&&d.months[3]?d.months[3]:"April",max:30,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},4:{name:d.months&&d.months[4]?d.months[4]:"May",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},5:{name:d.months&&d.months[5]?d.months[5]:"June",max:30,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},6:{name:d.months&&d.months[6]?d.months[6]:"July",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},7:{name:d.months&&d.months[7]?d.months[7]:"August",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},8:{name:d.months&&d.months[8]?d.months[8]:"September",max:30,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},9:{name:d.months&&d.months[9]?d.months[9]:"October",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},10:{name:d.months&&d.months[10]?d.months[10]:"November",max:30,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},11:{name:d.months&&d.months[11]?d.months[11]:"December",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},wDays:[{shrt:d.days&&d.days[0]?d.days[0].s:"S",lng:d.days&&d.days[0]?d.days[0].l:"Sunday"},{shrt:d.days&&d.days[1]?d.days[1].s:"M",lng:d.days&&d.days[1]?d.days[1].l:"Monday"},{shrt:d.days&&d.days[2]?d.days[2].s:"T",lng:d.days&&d.days[2]?d.days[2].l:"Tuesday"},{shrt:d.days&&d.days[3]?d.days[3].s:"W",lng:d.days&&d.days[3]?d.days[3].l:"Wednesday"},{shrt:d.days&&d.days[4]?d.days[4].s:"T",lng:d.days&&d.days[4]?d.days[4].l:"Thursday"},{shrt:d.days&&d.days[5]?d.days[5].s:"F",lng:d.days&&d.days[5]?d.days[5].l:"Friday"},{shrt:d.days&&d.days[6]?d.days[6].s:"S",lng:d.days&&d.days[6]?d.days[6].l:"Saturday"}],wdOffset:isNaN(d.wdOffset)?0:d.wdOffset},getWDay:function(p,t,q){var t=typeof t==="number"?t:p.range.current.wDay,s=p.range.wdOffset;if(s<0){t=(t+s)<0?7+s:t+s}else{if(s>0){t=(t+s)>6?-1+((t+s)-6):t+s}}if(q){t=6-t}return t},getDateOrdinalSuffix:function(q){var p=q%10,o=q%100;if(p==1&&o!=11){return q+"st"}if(p==2&&o!=12){return q+"nd"}if(p==3&&o!=13){return q+"rd"}return q+"th"},formatDate:function(p,q,o){if(typeof o!=="string"){o=p.inputDateFormat}var r=new RegExp(Object.keys(q).join("|"),"gi");return o.replace(r,function(s){return q[s]})},modifyDateValues:function(p,r){for(var q in r){var o=r[q];if(q==="month"){p.month+=o;if(o<0){if(p.month<0){p.month=11;if(p.year){p.year-=1}}}else{if(p.month>11){p.month=0;if(p.year){p.year+=1}}}}}return p},setFocus:function(u,t,r){var q=this;if(!u){return false}this.current=u;$A.query("td.dayInMonth.selected",this.containerDiv,function(o,s){$A.setAttr(s,{tabindex:"-1"});$A.remClass(s,"selected")});$A.addClass(u,"selected");$A.setAttr(u,{tabindex:"0"});if(!r){if(q.navBtn=="PM"){q.buttons.pM.focus();$A.announce(q.range[q.range.current.month].name);q.navBtnS=true}else{if(q.navBtn=="NM"){q.buttons.nM.focus();$A.announce(q.range[q.range.current.month].name);q.navBtnS=true}else{if(q.navBtn=="PY"){q.buttons.pY.focus();$A.announce(q.range.current.year.toString());q.navBtnS=true}else{if(q.navBtn=="NY"){q.buttons.nY.focus();$A.announce(q.range.current.year.toString());q.navBtnS=true}else{u.focus()}}}}}if(q.fn.navBtn){q.fn.navBtn=""}else{q.navBtn=""}return true},setCurrent:function(o){o.range.current={mDay:o.date.getDate(),month:o.date.getMonth(),year:o.date.getFullYear(),wDay:o.date.getDay()}},setDayMarked:function(q,p,o){var s=p.getFullYear(),u=p.getMonth(),r=p.getDate();if(o){if(typeof q.range[u].marked[s]!=="object"){q.range[u].marked[s]=[]}q.range[u].marked[s].push(r)}else{if(typeof q.range[u].marked[s]==="object"){var t=q.range[u].marked[s].indexOf(r);if(t!==-1){delete q.range[u].marked[s][t]}}}},clearAllMarked:function(o){for(var p in o.range){o.range[p].marked={}}},setDayDisabled:function(q,p,o){var s=p.getFullYear(),u=p.getMonth(),r=p.getDate();if(o){if(typeof q.range[u].disabled[s]!=="object"){q.range[u].disabled[s]=[]}q.range[u].disabled[s].push(r)}else{if(typeof q.range[u].disabled[s]==="object"){var t=q.range[u].disabled[s].indexOf(r);if(t!==-1){delete q.range[u].disabled[s][t]}}}},setMonthDisabled:function(q,p,o){var s=p.getFullYear(),t=p.getMonth();if(o){q.range[t].disabled[s]=[];for(var r=1;r<=q.range[t].max;r++){q.range[t].disabled[s].push(r)}}else{q.range[t].disabled[s]=[]}},setDayOfWeekDisabled:function(v,w,q,u){var r=w.getFullYear(),p=w.getMonth();if(typeof v.range[p].disabled[r]!=="object"){v.range[p].disabled[r]=[]}var o=new Date(r,p,1);for(var s=1;s<=v.range[p].max;s++){o.setDate(s);if(q.indexOf(o.getDay())!==-1){if(u){v.range[p].disabled[r].push(s)}else{var t=v.range[p].marked[r].indexOf(s);if(t!==-1){delete v.range[p].marked[r][t]}}}}},setWeekdaysDisabled:function(q,p,o){q.setDayOfWeekDisabled(q,p,[1,2,3,4,5],o)},setWeekendsDisabled:function(q,p,o){q.setDayOfWeekDisabled(q,p,[0,6],o)},clearAllDisabled:function(o){for(var p in o.range){o.range[p].disabled={}}},setMonthMessage:function(p,o,r){var q=o.getFullYear(),s=o.getMonth();if((typeof r==="string")&&(r.length>0)){p.range[s].message[q]=r}else{delete p.range[s].message[q]}},clearAllMessage:function(o){for(var p in o.range){o.range[p].message={}}},isDisabledDate:function(v,p,w,q){if(!q){q=v.range.current}var t=v.range[q.month].disabled[q.year],u=v.range[q.month].disabled["*"],o=v.range[q.month].disabledWDays,r=v.range.disabledWDays;var s=w.getDay();return !!((t&&$A.inArray(p,t)!==-1)||(u&&$A.inArray(p,u)!==-1)||(o.length&&$A.inArray(s,o)!==-1)||(r.length&&$A.inArray(s,r)!==-1)||v.isOutsideDateRange(w))},isOutsideDateRange:function(o){var p=this.createDateComparisonValue(o);return((this.minDateComparisonValue&&(p<this.minDateComparisonValue))||(this.maxDateComparisonValue&&(p>this.maxDateComparisonValue)))},createDayCell:function(q,x,w,y,o){var A=this;var z="<td ";if(o){z+='aria-current="date" '}if(y){z+='aria-disabled="true" '}z+='aria-label="';var s=A.range[A.range.current.month].comments[A.range.current.year],r=A.range[A.range.current.month].comments["*"];var v="";if(s&&s[q]){v=s[q]}else{if(r&&r[q]){v=r[q]}}if(v){z+=A.commentedTxt.replace(/<|>|\"/g,"")+" "}var t=x.getMonth();var p={YYYY:x.getFullYear(),MMMM:A.range[t].name,dddd:A.range.wDays[x.getDay()].lng,MM:("00"+(t+1)).slice(-2),DD:("00"+q).slice(-2),Do:A.getDateOrdinalSuffix(q),M:(t+1),D:q};var B=new RegExp(Object.keys(p).join("|"),"gi");z+=A.audibleDateFormat.replace(B,function(C){return p[C]});if(v){z+=v.replace(/<|>|\n/g," ").replace(/\"/g,'"')}z+='" role="link" tabindex="-1" ';z+='class="day '+(w?w:"");if(A.highlightToday===true){if(A.createDateComparisonValue(x)===A.currentDateComparisonValue){z+=" dayToday"}}var u=(A.range[A.range.current.month].marked[A.range.current.year]&&(A.range[A.range.current.month].marked[A.range.current.year].indexOf(q)!==-1));if((o&&!y)||u){z+=" dayMarked"}if(y){z+=" disabled"}if(v){z+=" comment"}z+='" ';z+='title="';if(u){z+=A.markedTxt.replace(/<|>|\"/g,"")}else{if(y){z+=A.disabledTxt.replace(/<|>|\"/g,"")}}if(v){z+=" "+A.commentedTxt.replace(/<|>|\"/g,"")}z+='" id="'+A.baseId+q+'"><span aria-hidden="true">'+q+"</span></td>";return z},createDateComparisonValue:function(o){return parseInt((o.getFullYear()+("00"+o.getMonth()).slice(-2)+("00"+o.getDate()).slice(-2)),10)},setDate:function(p,o){if(o===undefined){if((p.minDate||p.maxDate)&&p.isOutsideDateRange(p.initialDate)){if(p.initialDate<p.minDate){o=p.minDate}else{if(p.initialDate>p.maxDate){o=p.maxDate}}}else{o=p.initialDate}}p.date=o;p.setCurrent(p);p.fn.current={};$A.internal.extend(true,p.fn.current,p.range.current)},runOnceBefore:function(o){if(o.minDate){o.minDate.setHours(0,0,0,0);o.minDateComparisonValue=o.createDateComparisonValue(o.minDate)}if(o.maxDate){o.maxDate.setHours(0,0,0,0);o.maxDateComparisonValue=o.createDateComparisonValue(o.maxDate)}this.setDate(o);o.currentDate=new Date();o.currentDateComparisonValue=o.createDateComparisonValue(o.currentDate)},runBefore:function(I){if(typeof d.runBefore==="function"){d.runBefore(I)}if(I.disableWeekdays){I.setWeekdaysDisabled(I,I.date,true)}if(I.disableWeekends){I.setWeekendsDisabled(I,I.date,true)}if(d.ajax&&typeof d.ajax==="function"&&!I.stopAjax&&!I.ajaxLoading){I.ajaxLoading=I.cancel=true;I.fn.navBtn=I.navBtn;d.ajax.apply(I,[I,false])}if(I.range.current.month===1){I.range[1].max=(new Date(I.range.current.year,1,29).getMonth()==1)?29:28}I.baseId="b"+$A.genId();I.prevBtnId=I.baseId+"p";I.nextBtnId=I.baseId+"n";var D=I.modifyDateValues({month:I.range.current.month,year:I.range.current.year},{month:-1});var J=new Date();J.setMonth(D.month);J.setFullYear(D.year);var C=I.modifyDateValues({month:I.range.current.month,year:I.range.current.year},{month:1});var o=new Date();o.setMonth(C.month);o.setFullYear(C.year);var v="";if(!d.condenseYear){var z=!I.isOutsideDateRange(new Date((I.range.current.year-1),0,1)),y=!I.isOutsideDateRange(new Date((I.range.current.year+1),0,1));v='<tr class="yearSelector" role="presentation"><td class="nav prev btn year'+(!z?" disabled":"")+'" accesskey="1" title="'+I.prevTxt.replace(/<|>|\"/g,"")+" "+I.yearTxt.replace(/<|>|\"/g,"")+'" aria-label="'+I.prevTxt.replace(/<|>|\"/g,"")+" "+I.yearTxt.replace(/<|>|\"/g,"")+'"'+(!z?' aria-disabled="true" tabindex="-1"':' tabindex="0"')+' role="button" id="'+I.prevBtnId+'Y"><span aria-hidden="true">'+I.leftButtonYearText+'</span></td><td title="'+I.tooltipTxt.replace(/<|>|\"/g,"")+'" colspan="5" class="year" role="presentation"><span>'+I.range.current.year+'</span></td><td class="nav next nav prev btn'+(!y?" disabled":"")+'" accesskey="2" title="'+I.nextTxt.replace(/<|>|\"/g,"")+" "+I.yearTxt.replace(/<|>|\"/g,"")+'" aria-label="'+I.nextTxt.replace(/<|>|\"/g,"")+" "+I.yearTxt.replace(/<|>|\"/g,"")+'"'+(!y?' aria-disabled="true" tabindex="-1"':' tabindex="0"')+' role="button" id="'+I.nextBtnId+'Y"><span aria-hidden="true">'+I.rightButtonYearText+"</span></td></tr>"}var q=!I.isOutsideDateRange(new Date(D.year,D.month,I.range[D.month].max)),s=!I.isOutsideDateRange(new Date(C.year,C.month,1));var r='<tr class="monthSelector" role="presentation"><td class="nav prev btn month'+(!q?" disabled":"")+'" accesskey="3" title="'+I.prevTxt.replace(/<|>|\"/g,"")+" "+I.monthTxt.replace(/<|>|\"/g,"")+'" aria-label="'+I.prevTxt.replace(/<|>|\"/g,"")+" "+I.monthTxt.replace(/<|>|\"/g,"")+'"'+(!q?' aria-disabled="true" tabindex="-1"':' tabindex="0"')+' role="button" id="'+I.prevBtnId+'"><span aria-hidden="true">'+I.leftButtonMonthText+'</span></td><td colspan="5" class="month" role="presentation"><span>'+I.range[I.range.current.month].name+(!d.condenseYear?"":" "+I.range.current.year)+'</span></td><td class="nav next btn month'+(!s?" disabled":"")+'" accesskey="4" title="'+I.nextTxt.replace(/<|>|\"/g,"")+" "+I.monthTxt.replace(/<|>|\"/g,"")+'" aria-label="'+I.nextTxt.replace(/<|>|\"/g,"")+" "+I.monthTxt.replace(/<|>|\"/g,"")+'"'+(!s?' aria-disabled="true" tabindex="-1"':' tabindex="0"')+' role="button" id="'+I.nextBtnId+'"><span aria-hidden="true">'+I.rightButtonMonthText+"</span></td></tr>";I.source='<table role="application" class="calendar" aria-label="'+I.role+'">'+v+r+'<tr role="presentation">';I.iter=0;for(var B=0;B<7;B++){var E=I.getWDay(I,B),H=I.range.wDays[E];if(!B){I.iter=I.iterE=(E+6)>6?-1+E:E+6;I.iterS=E}I.source+='<th scope="col" class="week" title="'+H.lng+'" role="presentation"><span>'+H.shrt+"</span></th>"}I.source+='</tr><tr role="presentation">';var A=new Date();A.setDate(1);A.setMonth(I.range.current.month);A.setFullYear(I.range.current.year);var F=A.getDay();A.setDate(I.range[I.range.current.month].max);var G=A.getDay(),x=I.iterS;if(I.drawFullCalendar===true){var p=(new Date(D.year,(D.month+1),0)).getDate(),u=(p-(new Date(I.range.current.year,I.range.current.month,0)).getDay()+I.range.wdOffset)}while(x!=F){x=(x+1)>6?0:x+1;if(I.drawFullCalendar===true){J.setDate(u);I.source+=I.createDayCell(u,J,"dayInPrevMonth",I.isDisabledDate(I,u,J));++u}else{I.source+='<td class="empty" role="presentation"><span>&nbsp;</span></td>'}}I.range.track={};for(var B=1;B<=31;B++){I.range.track[I.baseId+B]=B}for(var B=1;B<=I.range[I.range.current.month].max;B++){A.setDate(B);var t=((B==I.fn.current.mDay)&&(I.range.current.month==I.fn.current.month)&&(I.range.current.year==I.fn.current.year));I.source+=I.createDayCell(B,A,"dayInMonth",I.isDisabledDate(I,B,A),t);var x=A.getDay();if(x==I.iter&&B<I.range[I.range.current.month].max){I.source+='</tr><tr role="presentation">'}}if(I.drawFullCalendar===true){var u=1}while(G!=I.iter){G=(G+1)>6?0:G+1;if(I.drawFullCalendar===true){o.setDate(u);I.source+=I.createDayCell(u,o,"dayInNextMonth",I.isDisabledDate(I,u,o));++u}else{I.source+='<td class="empty" role="presentation"><span>&nbsp;</span></td>'}}I.source+="</tr></table>";if(I.range[I.range.current.month].message[I.range.current.year]){I.source+='<div class="monthMessage">	<p>'+I.range[I.range.current.month].message[I.range.current.year]+"</p></div>"}$A.find("*",function(w){if(w.controlType&&w.controlType=="DatePicker"&&w.loaded){w.close()}})},click:function(p,o){p.stopPropagation()},runDuring:function(o){o.datepickerLoaded=false;$A.bind("body","click.datepicker",function(p){if(o.datepickerLoaded){o.close()}});$A.setAttr(o.accDCObj,{role:"dialog","data-helptext":o.helpText,"aria-label":o.role});o.fn.sraStart.innerHTML=o.fn.sraEnd.innerHTML="";$A.setAttr(o.fn.sraStart,{"aria-hidden":"true"});$A.setAttr(o.fn.sraEnd,{"aria-hidden":"true"})},runAfter:function(o){o.buttons={pY:d.condenseYear?null:$A.getEl(o.prevBtnId+"Y"),nY:d.condenseYear?null:$A.getEl(o.nextBtnId+"Y"),pM:$A.getEl(o.prevBtnId),nM:$A.getEl(o.nextBtnId)};if(!d.condenseYear&&o.disableNavPrevYearBtn){$A.setAttr(o.buttons.pY,"aria-disabled","true")}if(!d.condenseYear&&o.disableNavNextYearBtn){$A.setAttr(o.buttons.nY,"aria-disabled","true")}if(o.disableNavPrevMonthBtn){$A.setAttr(o.buttons.pM,"aria-disabled","true")}if(o.disableNavNextMonthBtn){$A.setAttr(o.buttons.nM,"aria-disabled","true")}if(!o.prevCurrent){o.prevCurrent={}}$A.internal.extend(true,o.prevCurrent,o.range.current);var r=function(){if(o.disableNavNextMonthBtn&&($A.getAttr(o.buttons.nM,"aria-disabled")=="true")){return}$A.internal.extend(true,o.prevCurrent,o.range.current);var v=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:1});if(!o.isOutsideDateRange(new Date(v.year,v.month,1))){var t=o.range.current.mDay>o.range[v.month].max?o.range[v.month].max:o.range.current.mDay,u=new Date(v.year,v.month,t);if(o.isOutsideDateRange(u)){o.date=o.maxDate}else{o.date=u}}else{o.date=o.maxDate}o.setCurrent(o);o.reopen=true;o.open()},p=function(){if(o.disableNavPrevMonthBtn&&($A.getAttr(o.buttons.pM,"aria-disabled")=="true")){return}$A.internal.extend(true,o.prevCurrent,o.range.current);var v=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:-1});if(!o.isOutsideDateRange(new Date(v.year,v.month,o.range[v.month].max))){var t=o.range.current.mDay>o.range[v.month].max?o.range[v.month].max:o.range.current.mDay,u=new Date(v.year,v.month,t);if(o.isOutsideDateRange(u)){o.date=o.minDate}else{o.date=u}}else{o.date=o.minDate}o.setCurrent(o);o.reopen=true;o.open()},q=function(u){if((!u&&((!d.condenseYear&&$A.getAttr(o.buttons.pY,"aria-disabled")=="true")||(d.condenseYear&&o.disableNavPrevYearBtn)))){return}else{if((u&&((!d.condenseYear&&$A.getAttr(o.buttons.nY,"aria-disabled")=="true")||(d.condenseYear&&o.disableNavNextYearBtn)))){return}}$A.internal.extend(true,o.prevCurrent,o.range.current);var x=o.range.current.month,w=u?o.range.current.year+1:o.range.current.year-1;if(x===1){o.range[1].max=28}var t=o.range.current.mDay>o.range[x].max?o.range[x].max:o.range.current.mDay;var v=new Date(w,x,t);if(o.isOutsideDateRange(v)){return}o.date=v;o.setCurrent(o);o.reopen=true;o.open()};var s=false;$A.bind("#"+o.containerDivId+" td.day",{focus:function(w){if($A.hasClass(this,"comment")){var x=o.children[0],v=o.range[o.range.current.month].comments[o.range.current.year],u=o.range[o.range.current.month].comments["*"],t="";if(v&&v[o.range.current.mDay]){t=v[o.range.current.mDay]}else{if(u&&u[o.range.current.mDay]){t=u[o.range.current.mDay]}}t=a(t.replace(/<|>/g,""));if(t){x.source=t;x.open()}}else{if(o.children[0].loaded){o.children[0].close()}}if(o.children[1].openEditor){o.children[1].openEditor=false;o.children[1].reset()}},click:function(v){if($A.hasClass(this,"dayInPrevMonth")){var u=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:-1});o.date=new Date(u.year,u.month,o.range.track[this.id])}else{if($A.hasClass(this,"dayInNextMonth")){var t=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:1});o.date=new Date(t.year,t.month,o.range.track[this.id])}else{o.date.setDate(o.range.track[this.id])}}o.setCurrent(o);if($A.hasClass(this,"selected")||(!l&&!$A.hasClass(this,"comment"))){if($A.getAttr(this,"aria-disabled")!="true"){$A.internal.extend(true,o.fn.current,o.range.current);h.apply(this,[v,o,k])}else{v.stopPropagation();v.preventDefault()}}else{o.setFocus(this)}v.preventDefault()},keydown:function(y){e(y);var u=y.which||y.keyCode;if(u==13){s=true;if($A.getAttr(this,"aria-disabled")!="true"){$A.internal.extend(true,o.fn.current,o.range.current);h.apply(this,[y,o,k])}y.preventDefault()}else{if(u==32&&l&&d.editor&&d.editor.show&&!o.children[1].openEditor){o.children[1].openEditor=true;o.children[1].reset();y.preventDefault()}else{if((u>=37&&u<=40)||u==27||(u>=33&&u<=36)){var x=o.range.current.wDay;if(u==37){$A.internal.extend(true,o.prevCurrent,o.range.current);if(o.range.current.mDay>1){o.range.current.mDay--;o.range.current.wDay=!x?6:x-1;o.setFocus(o.range.index[o.range.current.mDay-1],this)}else{if(o.range.current.mDay==1&&$A.getAttr(o.buttons.pM,"aria-disabled")!="true"){var w=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:-1});var t=o.range[w.month].max;if(w.month===1){t=(new Date(w.year,1,29).getMonth()==1)?29:28}o.date=new Date(w.year,w.month,t);o.setCurrent(o);o.reopen=true;o.open()}}}else{if(u==39){$A.internal.extend(true,o.prevCurrent,o.range.current);if(o.range.current.mDay<o.range[o.range.current.month].max){o.range.current.mDay++;o.range.current.wDay=x==6?0:x+1;o.setFocus(o.range.index[o.range.current.mDay-1],this)}else{if(o.range.current.mDay==o.range[o.range.current.month].max&&$A.getAttr(o.buttons.nM,"aria-disabled")!="true"){var w=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:1});o.date=new Date(w.year,w.month,1);o.setCurrent(o);o.reopen=true;o.open()}}}else{if(u==38){$A.internal.extend(true,o.prevCurrent,o.range.current);if((o.range.current.mDay-7)>0){o.range.current.mDay-=7;o.setFocus(o.range.index[o.range.current.mDay-1],this)}else{if($A.getAttr(o.buttons.pM,"aria-disabled")!="true"){var w=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:-1});if(w.month===1&&(new Date(w.year,1,29).getMonth()==1)){o.range[w.month].max=29}else{if(w.month===1){o.range[w.month].max=28}}var t=o.range[w.month].max+(o.range.current.mDay-7),v=new Date(w.year,w.month,t);if(!o.isOutsideDateRange(v)){o.date=v;o.setCurrent(o);o.reopen=true;o.open()}}}}else{if(u==40){$A.internal.extend(true,o.prevCurrent,o.range.current);if((o.range.current.mDay+7)<=o.range[o.range.current.month].max){o.range.current.mDay+=7;o.setFocus(o.range.index[o.range.current.mDay-1],this)}else{if($A.getAttr(o.buttons.nM,"aria-disabled")!="true"){var w=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:1});var t=o.range.current.mDay+7-o.range[o.range.current.month].max,v=new Date(w.year,w.month,t);if(!o.isOutsideDateRange(v)){o.date=v;o.setCurrent(o);o.reopen=true;o.open()}}}}else{if(u==27){o.close()}else{if(u==33){$A.internal.extend(true,o.prevCurrent,o.range.current);if(o.pageUpDownNatural===true){if(f.alt){q(false)}else{p()}}else{if(f.alt){q(true)}else{r()}}}else{if(u==34){$A.internal.extend(true,o.prevCurrent,o.range.current);if(o.pageUpDownNatural===true){if(f.alt){q(true)}else{r()}}else{if(f.alt){q(false)}else{p()}}}else{if(u==36){$A.internal.extend(true,o.prevCurrent,o.range.current);if(x!=o.iterS&&o.range.current.mDay>1){while(o.range.current.wDay!=o.iterS&&$A.getEl(o.baseId+(o.range.current.mDay-1))){o.range.current.wDay=(o.range.current.wDay-1)<0?6:o.range.current.wDay-1;o.range.current.mDay--}o.setFocus(o.range.index[o.range.current.mDay-1],this)}}else{if(u==35){$A.internal.extend(true,o.prevCurrent,o.range.current);if(x!=o.iterE&&o.range.current.mDay<o.range[o.range.current.month].max){while(o.range.current.wDay!=o.iterE&&$A.getEl(o.baseId+(o.range.current.mDay+1))){o.range.current.wDay=(o.range.current.wDay+1)>6?0:o.range.current.wDay+1;o.range.current.mDay++}o.setFocus(o.range.index[o.range.current.mDay-1],this)}}}}}}}}}}y.preventDefault()}else{if(u==9&&!f.alt&&!f.ctrl&&!f.shift){$A.internal.extend(true,o.prevCurrent,o.range.current);if(!d.condenseYear&&$A.getAttr(o.buttons.pY,"aria-disabled")!="true"){o.buttons.pY.focus()}else{if(!d.condenseYear&&$A.getAttr(o.buttons.nY,"aria-disabled")!="true"){o.buttons.nY.focus()}else{if($A.getAttr(o.buttons.pM,"aria-disabled")!="true"){o.buttons.pM.focus()}else{if($A.getAttr(o.buttons.nM,"aria-disabled")!="true"){o.buttons.nM.focus()}}}}y.preventDefault()}else{if(u==9&&!f.alt&&!f.ctrl&&f.shift){$A.internal.extend(true,o.prevCurrent,o.range.current);if($A.getAttr(o.buttons.nM,"aria-disabled")!="true"){o.buttons.nM.focus()}else{if($A.getAttr(o.buttons.pM,"aria-disabled")!="true"){o.buttons.pM.focus()}else{if(!d.condenseYear&&$A.getAttr(o.buttons.nY,"aria-disabled")!="true"){o.buttons.nY.focus()}else{if(!d.condenseYear&&$A.getAttr(o.buttons.pY,"aria-disabled")!="true"){o.buttons.pY.focus()}}}}y.preventDefault()}}}}}},keyup:function(u){e(u);var t=u.which||u.keyCode;if(t==13&&!s&&!o.isAdd){if($A.getAttr(this,"aria-disabled")!="true"){$A.internal.extend(true,o.fn.current,o.range.current);if(!o.setFocus.firstOpen){h.apply(this,[u,o,k])}}u.preventDefault()}s=o.setFocus.firstOpen=o.isAdd=false}});$A.bind(o.buttons.pM,{click:function(t){o.navBtn="PM";p();t.preventDefault()},keydown:function(u){e(u);var t=u.which||u.keyCode;if(t==13||t==32){o.navBtn="PM";p();u.preventDefault()}else{if(t==27){o.close();u.preventDefault()}else{if(!d.condenseYear&&t==38){o.buttons.pY.focus();u.preventDefault()}else{if(t==39){o.buttons.nM.focus();u.preventDefault()}else{if(t==37||t==40){u.preventDefault()}else{if(t==9&&!f.alt&&!f.ctrl&&!f.shift){if($A.getAttr(o.buttons.nM,"aria-disabled")!="true"){o.buttons.nM.focus()}else{$A.query('td.day[tabindex="0"]',o.containerDiv)[0].focus()}u.preventDefault()}else{if(t==9&&!f.alt&&!f.ctrl&&f.shift){if(!d.condenseYear&&$A.getAttr(o.buttons.nY,"aria-disabled")!="true"){o.buttons.nY.focus()}else{if(!d.condenseYear&&$A.getAttr(o.buttons.pY,"aria-disabled")!="true"){o.buttons.pY.focus()}else{$A.query('td.day[tabindex="0"]',o.containerDiv)[0].focus()}}u.preventDefault()}}}}}}}},keyup:function(t){e(t)}});$A.bind(o.buttons.nM,{click:function(t){o.navBtn="NM";r();t.preventDefault()},keydown:function(u){e(u);var t=u.which||u.keyCode;if(t==13||t==32){o.navBtn="NM";r();u.preventDefault()}else{if(t==27){o.close();u.preventDefault()}else{if(!d.condenseYear&&t==38){o.buttons.nY.focus();u.preventDefault()}else{if(t==37){o.buttons.pM.focus();u.preventDefault()}else{if(t==39||t==40){u.preventDefault()}else{if(t==9&&!f.alt&&!f.ctrl&&!f.shift){$A.query('td.day[tabindex="0"]',o.containerDiv)[0].focus();u.preventDefault()}else{if(t==9&&!f.alt&&!f.ctrl&&f.shift){if($A.getAttr(o.buttons.pM,"aria-disabled")!="true"){o.buttons.pM.focus()}else{if(!d.condenseYear&&$A.getAttr(o.buttons.nY,"aria-disabled")!="true"){o.buttons.nY.focus()}else{if(!d.condenseYear&&$A.getAttr(o.buttons.pY,"aria-disabled")!="true"){o.buttons.pY.focus()}else{$A.query('td.day[tabindex="0"]',o.containerDiv)[0].focus()}}}u.preventDefault()}}}}}}}},keyup:function(t){e(t)}});if(!d.condenseYear){$A.bind(o.buttons.pY,{click:function(t){o.navBtn="PY";q();t.preventDefault()},keydown:function(u){e(u);var t=u.which||u.keyCode;if(t==13||t==32){o.navBtn="PY";q();u.preventDefault()}else{if(t==27){o.close();u.preventDefault()}else{if(t==39){o.buttons.nY.focus();u.preventDefault()}else{if(t==40){o.buttons.pM.focus();u.preventDefault()}else{if(t==37||t==38){u.preventDefault()}else{if(t==9&&!f.alt&&!f.ctrl&&!f.shift){if($A.getAttr(o.buttons.nY,"aria-disabled")!="true"){o.buttons.nY.focus()}else{if($A.getAttr(o.buttons.pM,"aria-disabled")!="true"){o.buttons.pM.focus()}else{if($A.getAttr(o.buttons.nM,"aria-disabled")!="true"){o.buttons.nM.focus()}else{$A.query('td.day[tabindex="0"]',o.containerDiv)[0].focus()}}}u.preventDefault()}else{if(t==9&&!f.alt&&!f.ctrl&&f.shift){$A.query('td.day[tabindex="0"]',o.containerDiv)[0].focus();u.preventDefault()}}}}}}}},keyup:function(t){e(t)}})}if(!d.condenseYear){$A.bind(o.buttons.nY,{click:function(t){o.navBtn="NY";q(true);t.preventDefault()},keydown:function(u){e(u);var t=u.which||u.keyCode;if(t==13||t==32){o.navBtn="NY";q(true);u.preventDefault()}else{if(t==27){o.close();u.preventDefault()}else{if(t==37){o.buttons.pY.focus();u.preventDefault()}else{if(t==40){o.buttons.nM.focus();u.preventDefault()}else{if(t==38||t==39){u.preventDefault()}else{if(t==9&&!f.alt&&!f.ctrl&&!f.shift){if($A.getAttr(o.buttons.pM,"aria-disabled")!="true"){o.buttons.pM.focus()}else{if($A.getAttr(o.buttons.nM,"aria-disabled")!="true"){o.buttons.nM.focus()}else{$A.query('td.day[tabindex="0"]',o.containerDiv)[0].focus()}}u.preventDefault()}else{if(t==9&&!f.alt&&!f.ctrl&&f.shift){if($A.getAttr(o.buttons.pY,"aria-disabled")!="true"){o.buttons.pY.focus()}else{$A.query('td.day[tabindex="0"]',o.containerDiv)[0].focus()}u.preventDefault()}}}}}}}},keyup:function(t){e(t)}})}o.range.index=$A.query("td.dayInMonth",o.containerDiv);o.setFocus.firstOpen=true;o.setFocus(o.range.index[o.range.current.mDay-1]);if(l&&d.editor&&d.editor.show){o.children[1].open()}$A.bind(window,"resize.datepicker",function(t){o.setPosition()});$A.setAttr(o.triggerObj,"aria-expanded","true");setTimeout(function(){o.datepickerLoaded=true},750);if(!o.navBtnS){if(!("ontouchstart" in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)){$A.announce(o.helpText)}}o.navBtnS=false},helpText:m,runAfterClose:function(o){if(!o.reopen){if(d.resetCurrent){o.date=new Date();o.setCurrent(o);$A.internal.extend(true,o.fn.current,o.range.current)}if(l){o.children[0].close()}if(l&&d.editor&&d.editor.show){o.children[1].lock=false;o.children[1].close()}}else{o.reopen=false}if(d.ajax&&typeof d.ajax==="function"){o.lock=o.ajaxLoading=false}$A.unbind(window,".datepicker");$A.unbind("body",".datepicker");$A.setAttr(o.triggerObj,"aria-expanded","false");if(typeof d.runAfterClose==="function"){d.runAfterClose(o)}}}]);$A.setAttr(c,"aria-expanded","false");var b=$A.reg[i],g=false,j=function(){g=false};$A.bind(c,"click",function(o){if(!g&&!b.loaded){g=true;$A.trigger(this,"opendatepicker");setTimeout(j,1000)}else{if(!g&&b.loaded){g=true;b.close();setTimeout(j,1000)}}o.preventDefault()});$A($A.reg[i],[{id:i+"commentTooltip",role:d.comments&&d.comments.role||"Comment",returnFocus:false,showHiddenClose:false,allowReopen:true,autoPosition:isNaN(d.comments&&d.comments.autoPosition)?1:d.comments.autoPosition,offsetTop:isNaN(d.comments&&d.comments.offsetTop)?0:d.comments.offsetTop,offsetLeft:isNaN(d.comments&&d.comments.offsetLeft)?0:d.comments.offsetLeft,cssObj:{position:"absolute",zIndex:$A.reg[i].cssObj.zIndex},className:d.comments&&d.comments.className||"commentTooltip",runBefore:function(o){o.triggerObj=o.parent.accDCObj}}]);$A($A.reg[i],[{id:i+"commentAdd",role:d.editor&&d.editor.role||"Edit",returnFocus:false,allowReopen:true,autoPosition:isNaN(d.editor&&d.editor.autoPosition)?6:d.editor.autoPosition,offsetTop:isNaN(d.editor&&d.editor.offsetTop)?0:d.editor.offsetTop,offsetLeft:isNaN(d.editor&&d.editor.offsetLeft)?0:d.editor.offsetLeft,cssObj:{position:"absolute",zIndex:$A.reg[i].cssObj.zIndex},className:d.editor&&d.editor.className||"commentAdd",openEditor:false,source:'<textarea style="visibility: hidden; display: none;" class="commentTa" title="'+$A.reg[i+"commentTooltip"].role+'"></textarea><button title="'+(d.editor&&d.editor.role||"Edit")+" "+$A.reg[i+"commentTooltip"].role+'" class="commentBtn">'+(d.editor&&d.editor.role||"Edit")+"</button>",runBefore:function(o){o.triggerObj=o.parent.accDCObj},click:function(p,o){p.stopPropagation()},runDuring:function(o){$A.setAttr(o.accDCObj,{role:"dialog","aria-label":o.role});$A.setAttr(o.containerDiv,"role","application");o.fn.sraStart.innerHTML=o.fn.sraEnd.innerHTML="";$A.setAttr(o.fn.sraStart,{"aria-hidden":"true"});$A.setAttr(o.fn.sraEnd,{"aria-hidden":"true"})},add:function(o){var p=a(o.textarea.value.replace(/<|>|\n/g," "));if(!o.comments[o.parent.range.current.year]){o.comments[o.parent.range.current.year]={}}o.comments[o.parent.range.current.year][o.parent.range.current.mDay]=p;var q=o.parent.range.current.mDay+", "+o.parent.range.wDays[o.parent.range.current.wDay].lng+" "+o.parent.range[o.parent.range.current.month].name+" "+o.parent.range.current.year,r="";if((o.parent.range[o.parent.range.current.month].disabled[o.parent.range.current.year]&&$A.inArray(o.parent.range.current.mDay,o.parent.range[o.parent.range.current.month].disabled[o.parent.range.current.year])!==-1)||(o.parent.range[o.parent.range.current.month].disabled["*"]&&$A.inArray(o.parent.range.current.mDay,o.parent.range[o.parent.range.current.month].disabled["*"])!==-1)){r+=o.parent.disabledTxt.replace(/<|>|\"/g,"")+" "}if(!p){$A.remClass(o.parent.current,"comment")}else{$A.addClass(o.parent.current,"comment");r+=o.parent.commentedTxt.replace(/<|>|\"/g,"")+" "}q=r+q;$A.setAttr(o.parent.current,{title:a(r),"aria-label":q+" "+p.replace(/\"/g,'"')})},reset:function(){var o=this;if(o.openEditor){o.comments=o.parent.range[o.parent.range.current.month].comments;if(!o.textarea){o.textarea=$A.query("textarea",o.containerDiv,function(){$A.css(this,{visibility:"",display:""});o.css("left",o.parent.accDCObj.offsetLeft);$A.bind(this,{focus:function(p){if(o.parent.children[0].loaded){o.parent.children[0].close()}},keydown:function(q){var p=q.which||q.keyCode;if(this.value.length>800){this.value=this.value.substring(0,799)}if(p==13){o.parent.isAdd=true;o.add.apply(this,[o]);o.parent.current.focus();o.openEditor=false;o.reset();q.preventDefault()}else{if(p==27){o.parent.current.focus();o.openEditor=false;o.reset();q.preventDefault()}}}})})[0]}else{$A.css(o.textarea,{visibility:"",display:""});o.css("left",o.parent.accDCObj.offsetLeft)}$A.setAttr(o.textarea,{title:o.parent.range.current.mDay+", "+o.parent.range.wDays[o.parent.range.current.wDay].lng+" "+o.parent.range[o.parent.range.current.month].name+" "+o.parent.range.current.year}).focus();if(o.comments[o.parent.range.current.year]&&o.comments[o.parent.range.current.year][o.parent.range.current.mDay]){o.textarea.value=o.comments[o.parent.range.current.year][o.parent.range.current.mDay]}$A.setAttr(o.commentBtn,{title:(d.editor&&d.editor.action1||"Save")+" "+$A.reg[i+"commentTooltip"].role}).innerHTML=d.editor&&d.editor.action1||"Save"}else{if(o.textarea){o.textarea.value="";$A.css(o.textarea,{visibility:"hidden",display:"none"})}o.css("left",o.parent.accDCObj.offsetLeft+o.parent.accDCObj.offsetWidth-o.accDCObj.offsetWidth);$A.setAttr(o.commentBtn,{title:(d.editor&&d.editor.role||"Edit")+" "+$A.reg[i+"commentTooltip"].role}).innerHTML=d.editor&&d.editor.role||"Edit"}},runAfter:function(o){$A.query("button",o.containerDiv,function(){o.commentBtn=this;$A.bind(this,{focus:function(p){if(o.parent.children[0].loaded){o.parent.children[0].close()}},click:function(p){if(o.openEditor){o.parent.isAdd=true;o.add.apply(this,[o]);o.parent.current.focus();o.openEditor=false;o.reset()}else{o.openEditor=true;o.reset()}p.preventDefault()},keydown:function(q){var p=q.which||q.keyCode;if(p==27){if(o.openEditor){o.parent.current.focus();o.openEditor=false;o.reset()}q.preventDefault()}}})});o.reset();o.lock=true;$A.bind(window,"resize.dateeditor",function(p){o.setPosition();o.reset()});$A.bind($A.query("textarea",o.containerDiv)[0],"keydown",function(q){var p=q.which||q.keyCode;if(p==9&&!q.altKey&&!q.ctrlKey&&q.shiftKey){$A.query("button",o.containerDiv)[0].focus();q.preventDefault()}})},tabOut:function(p,o){$A.query("textarea",o.containerDiv)[0].focus()},runBeforeClose:function(o){o.openEditor=false;o.textarea=null;$A.unbind(window,"resize.dateeditor");if(d.ajax&&typeof d.ajax==="function"){d.ajax.apply(o.parent,[o.parent,true])}o.parent.setFocus.firstOpen=true},lock:l&&d.editor&&d.editor.show?false:true}])};var a=function(b){return b.replace(/^\s+|\s+$/g,"")}})();